<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/normalize.css">
  <script src="/vendor/jquery-1.10.2.min.js"></script>
  <script src="/vendor/jquery-ui-1.10.3.custom.min.js"></script>
  <script src="/main.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
  <link rel="manifest" href="img/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
  <title>ナダ娘投票フォーム</title>
</head>
<body>
  <div class="main">
  <header class="page-header">
    <h1 class="page-title">灘校体育祭</h1>
    <img class="logo" src="img/logo.png" alt="logo">
  </header>
  <div id="work">
  <div class="section-header">
    <div class="inner">
      <ul class="tabs-nav">
        <li><a href="#vote" class="vote1">投票</a></li>
        <li><a href="#intro" class="intro2">ルール説明</a></li>
      </ul>
    </div>
  </div>
  <div class="section-body">
  <section class="contents tabs-panel" id="vote">
    <section class="single">
      <h2 class="midashi">単勝</h2>
      <div class="box">
        <div class="box-sin"><span id="sin-first">一位</span></div>
      </div>
      <div class="candidate">
        <div  class="horse horse-sin first1"><img src="img/horse1.jpg" alt="候補者その１" draggable="false"></div>
        <div class="horse horse-sin second1"><img src="img/horse2.jpg" alt="候補者その２" draggable="false"></div>
        <div class="horse horse-sin third1"><img src="img/horse3.jpg" alt="候補者その３" draggable="false"></div>
        <div class="horse horse-sin fourth1"><img src="img/horse4.jpg" alt="候補者その４" draggable="false"></div>
      </div>
      <div class="cp_iptxt">
        <input class="ef singleform" type="number" form="form1" min="1" max="100" placeholder="">
        <label>ポイントを入力</label>
        <span class="focus_line"><i></i></span>
        </div>
    </section>
    <section class="triple">
      <h2 class="midashi">三連単</h2>
      <div class="boxes">
        <div class="box box-tri">一位</div>
        <div class="box box-tri">二位</div>
        <div class="box box-tri">三位</div>
      </div>
      <div class="candidate">
        <img src="img/horse1.jpg" alt="候補者その１" class="horse horse-tri first2">
        <img src="img/horse2.jpg" alt="候補者その２" class="horse horse-tri second2">
        <img src="img/horse3.jpg" alt="候補者その３" class="horse horse-tri third2">
        <img src="img/horse4.jpg" alt="候補者その４" class="horse horse-tri fourth2">
      </div>
      <div class="cp_iptxt">
        <input class="ef tripleform" type="number" form="form1" min="1" max="100" placeholder="">
        <label>ポイントを入力</label>
        <span class="focus_line"><i></i></span>
        </div>
    </section>
    <form id="form1" action="#">
      <button class="button1" type="submit">投票<span>残り100pt</span></button>
    </form>
  </section>
  <section class="tabs-panel" id="intro">
    うんちぶり
  </section>
</div>
</div>
</div>
</body>
</html>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="https://rawgithub.com/briangonzalez/jquery.pep.js/master/src/jquery.pep.js"></script>
<script>
  jQuery(function ($) {
    $('.horse-sin').on('MSPointerDown touchstart mousedown', function (e) {
      $(this).pep({
        shouldEase: false,
        place: false,
        droppable: '.box-sin',        // dropを許可する要素
        revert: true,
        start: function (ev, obj) {

        },
        drag: function (ev, obj) {
          console.log(obj.activeDropRegions);
          console.log(obj.$el.hasClass("first1"))
        },
        stop: function (ev, obj) {
          if(obj.activeDropRegions.length>0){
            obj.$el.css("display","none");
            $("#sin-first").css("display", "none");
            if (obj.$el.hasClass("first1")) {
              obj.activeDropRegions[0].css({
                "background-image" : "url(img/horse1.jpg)",
                "background-size" : "50px auto",
                "background-position" : "top left"
              });
              obj.activeDropRegions[0].addClass("1");
              if(obj.activeDropRegions[0].hasClass("2")){
                obj.activeDropRegions[0].removeClass("2");
                $(".second1").css("display","block");
              }
              if (obj.activeDropRegions[0].hasClass("3")) {
                obj.activeDropRegions[0].removeClass("3");
                $(".third1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("4")) {
                obj.activeDropRegions[0].removeClass("4");
                $(".fourth1").css("display", "block");
              }
            }
            if (obj.$el.hasClass("second1")) {
              obj.activeDropRegions[0].css({
                "background-image": "url(img/horse2.jpg)",
                "background-size": "50px auto",
                "background-position": "top left"
              });
              obj.activeDropRegions[0].addClass("2");
              if (obj.activeDropRegions[0].hasClass("1")) {
                obj.activeDropRegions[0].removeClass("1");
                $(".first1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("3")) {
                obj.activeDropRegions[0].removeClass("3");
                $(".third1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("4")) {
                obj.activeDropRegions[0].removeClass("4");
                $(".fourth1").css("display", "block");
              }
            }
            if (obj.$el.hasClass("third1")) {
              obj.activeDropRegions[0].css({
                "background-image": "url(img/horse3.jpg)",
                "background-size": "50px auto",
                "background-position": "top left"
              });
              obj.activeDropRegions[0].addClass("3");
              if (obj.activeDropRegions[0].hasClass("2")) {
                obj.activeDropRegions[0].removeClass("2");
                $(".second1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("1")) {
                obj.activeDropRegions[0].removeClass("1");
                $(".first1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("4")) {
                obj.activeDropRegions[0].removeClass("4");
                $(".fourth1").css("display", "block");
              }
            }
            if (obj.$el.hasClass("fourth1")) {
              obj.activeDropRegions[0].css({
                "background-image": "url(img/horse4.jpg)",
                "background-size": "50px auto",
                "background-position": "top left"
              });
              obj.activeDropRegions[0].addClass("4");
              if (obj.activeDropRegions[0].hasClass("2")) {
                obj.activeDropRegions[0].removeClass("2");
                $(".second1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("3")) {
                obj.activeDropRegions[0].removeClass("3");
                $(".third1").css("display", "block");
              }
              if (obj.activeDropRegions[0].hasClass("1")) {
                obj.activeDropRegions[0].removeClass("1");
                $(".first1").css("display", "block");
              }
            }
          }
        }
      });
    });
    $('.horse-tri').on('MSPointerDown touchstart mousedown', function (e) {
      $(this).pep({
        shouldEase: false,
        place: false,
        droppable: '.box-tri',        // dropを許可する要素
        revert: true,
        start: function (ev, obj) {

        },
        drag: function (ev, obj) {

        },
        stop: function (ev, obj) {
        }
      });
    });
  });
</script>